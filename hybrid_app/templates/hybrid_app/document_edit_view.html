{% extends "hybrid_app/base.html" %}

{% block content %}

  <div id="app">
    <block-item
      v-for="item in blocks"
      v-bind:block="item"
      v-bind:key="item.id"
    >
    </block-item>
  </div>

  <script>
    const app = Vue.createApp({
      data() {
        return {
          blocks: null
        }
      },
      mounted() {
        axios
          .get('../api/block-list/' + {{ pk }})
          .then(response => {
            this.blocks = response.data
          })
      }
    })

    app.component('block-item', {
      delimiters: ["[[", "]]"],
      props: ['block'],
      template: '<p>[[ block.type ]]</p>'
    })

    app.mount('#app')
  </script>

{% endblock %}
